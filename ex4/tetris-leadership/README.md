# 领导力方块（Tetris-Style Leadership）

一个把俄罗斯方块操作与领导力情境练习结合的课堂互动小游戏，可直接在浏览器本地运行或部署到 GitHub Pages。

## 快速开始

1. 下载/克隆仓库后进入 `ex4/tetris-leadership/` 目录。
2. 直接双击 `index.html` 即可离线体验（如浏览器阻止读取 `levels.json`，脚本会自动使用内置的 `FALLBACK_LEVELS` 数据）。
3. 若部署到 GitHub Pages 或其他静态服务器，只需保持目录结构不变即可在线运行。

## 游戏界面

- **画布区域**：原生 `<canvas>` 渲染 10×20 网格，中央五列标记为 A–E 选项列。
- **顶部 HUD**：显示章节 / 关卡 / 倒计时，配有开始、暂停、下一关按钮。
- **右侧面板**：玻璃拟态风格的三维分数（Trust / Clarity / Results）、情境卡文本、即时反馈。
- **移动端适配**：底部提供左右/下虚拟按键，360px 宽屏也可操作。

## 玩法要点

- 每个下落方块都携带当前关卡的情境卡，情境描述和 A–E 五个选项显示在右侧面板。
- 移动方块让它落在目标列：
  - A 列：第 3 列
  - B 列：第 4 列
  - C 列：第 5 列
  - D 列：第 6 列
  - E 列：第 7 列
- 方块落地瞬间即视为做出选择：
  - 落在最佳选项列：清除该行，Trust/Clarity/Results 按正向数值加分，反馈显示最佳理由。
  - 落在非最佳选项：在底部加一行“惩罚行”（留出最佳列的缺口），三维分数根据影响值微调，反馈强调风险。
- **关卡时长**：默认 75 秒。时间耗尽或堆叠到顶即结算。
- **结果页**：弹出统计面板（条形图、正确率、选项分布、复盘问题），可导出 JSON 结果。

## 操作方式

- 键盘：`←` `→` 水平移动，`↓` 快速下落，`P` 暂停/恢复，`R` 重开当前关卡。
- 触控：底部虚拟按键分别对应左移、加速下落、右移。

## 章节与关卡

| 章节 | 关卡（易 / 中 / 难） |
| --- | --- |
| 组队 | 谁可信任 · 信息透明 · 角色分配 |
| 融合 | 文化破冰 · 冲突对话 · 共享愿景 |
| 借力 | 资源盘点 · 影响对齐 · 跨界协作 |
| 挺身 | 危机发声 · 决策背锅 · 士气恢复 |
| 共赢 | 价值复盘 · 伙伴维护 · 战略共创 |

每个关卡定义了一组情境、五个选项、最佳选项提示、三维分数影响与反馈语。

## 主持流程示例

1. **开启投票**：学员阅读情境后在纸卡/手机上选择 A–E。
2. **操控落子**：主持人根据现场投票结果移动方块至对应列并下落。
3. **即时反馈**：画面显示该选项的点评与 Trust/Clarity/Results 的即时变化，可引导讨论。
4. **关卡复盘**：时间结束后查看条形图与选项分布，引导学员围绕提供的 3–5 个反思问题讨论。
5. **导出记录（可选）**：点击“导出结果 JSON”保存本关决策与分数，方便课后复盘。

## 如何新增 / 修改关卡

全部情境配置存放在 `levels.json` 中，结构如下：

```json
{
  "chapter": "组队",
  "stage": "关卡1：谁可信任（易）",
  "scenario": "情境描述…",
  "options": {
    "A": "选项文本",
    "B": "…",
    "C": "…",
    "D": "…",
    "E": "…"
  },
  "best": "B",
  "feedback": {
    "A": "落在 A 列时的点评",
    "B": "最佳选项的肯定语",
    "C": "…",
    "D": "…",
    "E": "…"
  },
  "impact": {
    "A": { "Trust": -1, "Clarity": 0, "Results": 0 },
    "B": { "Trust": 2, "Clarity": 1, "Results": 1 },
    "C": { "Trust": -1, "Clarity": -1, "Results": 0 },
    "D": { "Trust": 0, "Clarity": 0, "Results": 1 },
    "E": { "Trust": -2, "Clarity": -1, "Results": -1 }
  }
}
```

- `chapter` 与 `stage` 字段用于 HUD 显示及章节分组，请保持“关卡X：标题（难度）”格式。
- `best` 必须是 `A`–`E` 之一。
- `impact` 数值建议在 -2 ~ +2 范围内，体现选择对三维分数的影响。
- 修改后无需额外编译，刷新页面即可看到新数据。

## 部署到 GitHub Pages

1. 在仓库设置里启用 Pages，选择 `main` 分支 / 根目录（或将 `ex4/tetris-leadership/` 拷贝到单独仓库）。
2. 发布后访问 `https://<username>.github.io/<repo>/ex4/tetris-leadership/` 即可体验。
3. Pages 环境支持 `fetch('levels.json')`，会自动使用最新关卡数据。

## 本地离线访问说明

- 直接双击 `index.html` 使用 `file://` 协议时，浏览器可能阻止读取外部 JSON。`game.js` 已包含 `FALLBACK_LEVELS`，若加载失败会输出警告并自动改用内置数据，确保课堂演示不中断。

祝使用愉快，欢迎结合课程内容继续扩展情境与章节！
